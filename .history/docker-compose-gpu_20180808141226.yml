version: '2.3'

services:
  gpu:
    ports:
      - 8888:8888
    env_file: ./.env
    environment:
      - HOME=$HOME/.docker-compose-datascience-env-containers-gpu-home
    runtime: nvidia
    build:
      context: ./gpu
    user: ${CURRENT_UID}
    volumes:
      - ../notebooks:/notebooks
    command: bash -c "export PYTHONPATH=/notebooks/ && jupyter notebook --notebook-dir /notebooks/ --ip=* --port=8888 --NotebookApp.token='' --log-level=DEBUG --no-browser --debug"
